"use client";

import styles from "../demo.module.css";
import { 
  PieChart, Pie, Cell, 
  BarChart, Bar, XAxis, YAxis, 
  LineChart, Line, 
  ResponsiveContainer,  Legend  
} from "recharts";

import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { 
  faTriangleExclamation,
  faArrowTrendUp
} from "@fortawesome/free-solid-svg-icons";

// Fake data
const riskTrendData = [
  { week: "W1", compliance: 12, review: 8 },
  { week: "W2", compliance: 18, review: 10 },
  { week: "W3", compliance: 15, review: 11 },
  { week: "W4", compliance: 24, review: 12 },
  { week: "W5", compliance: 31, review: 14 },
  { week: "W6", compliance: 28, review: 15 },
];

const exposureByTeamData = [
  { name: "Time Pressure", exposure: 45 },
  { name: "Tiredness", exposure: 72 },
  { name: "High Risks", exposure: 38 },
  { name: "Information Ambiguity", exposure: 85 },
];

const severityData = [
  { name: "HR", value: 45 },
  { name: "Board", value: 35 },
  { name: "Trading", value: 10 },
  { name: "Analytics", value: 10 },
];

const COLORS = ["#6dbaa1", "#ff9dff", "#bd48b6", "#1f755a"];

export default function Exposure() {
  return (
    <div>
      <h2 style={{ fontSize: "1.5rem", fontWeight: 600, color: "var(--text-primary)", marginBottom: "1rem" }}>
        Exposure Status: <FontAwesomeIcon icon={faTriangleExclamation} /> Moderate
      </h2>

      {/* Top card - full width */}
      <div className={styles.horizontalGrid} style={{ gridTemplateColumns: "1fr 2fr" }}>
        {/* Left side - Summary */}
        <div className={styles.card}>
          <h3 className={styles.cardTitle}>Value Tied in AI Decisions:</h3>
          <p className={styles.cardText} style={{ fontSize: "4rem", fontWeight: 700, margin: "0.5rem 0" }}>
            $4.2M
          </p>
          <p className={styles.cardText}>10% of your organisation's weekly revenue was generated by decisions surpervised by AI. Another 25% was made under moderate to significant AI influence.</p>
        </div>
        <div className={styles.card}>
          <h3 className={styles.cardTitle}>Compliance Review</h3>
          <p className={styles.cardText}>
            This is how the number of AI-influenced decisions and human reviews have trended. Large gaps between the two lines may indicate potential exposure to risk.
          </p>
          <div style={{ width: "100%", height: 200, marginTop: "1rem" }}>
            <ResponsiveContainer>
            <LineChart data={riskTrendData}>
              <Legend 
                wrapperStyle={{ fontSize: "12px", color: "#cfcac2" }}
              />
              <XAxis 
                dataKey="week" 
                tick={{ fill: "#cfcac2", fontSize: 12 }}
                axisLine={false}
                tickLine={false}
              />
              <YAxis hide />
              <Line 
                type="monotone" 
                dataKey="compliance" 
                stroke="#ff9dff" 
                strokeWidth={2}
                dot={{ fill: "#ff9dff", strokeWidth: 0, r: 4 }}
              />
              <Line 
                type="monotone" 
                dataKey="review" 
                stroke="#6dbaa1" 
                strokeWidth={2}
                dot={{ fill: "#6dbaa1", strokeWidth: 0, r: 4 }}
              />
            </LineChart>
          </ResponsiveContainer>
          </div>
        </div>
      </div>

      <div className={styles.horizontalGrid} style={{ gridTemplateColumns: "2fr 1fr", gap: "1rem" }}>
        {/* Bottom left card - Bar Chart */}
        <div className={styles.card}>
          <h3 className={styles.cardTitle}>Disempowering Factors</h3>
          <p className={styles.cardText}>These factors were present when teams delegated their decisions to AI.</p>
          <div style={{ width: "100%", height: 180, marginTop: "1rem" }}>
            <ResponsiveContainer>
              <BarChart data={exposureByTeamData} layout="vertical">
                <XAxis type="number" hide />
                <YAxis 
                  type="category" 
                  dataKey="name" 
                  tick={{ fill: "#cfcac2", fontSize: 12 }} 
                  axisLine={false}
                  tickLine={false}
                  width={80}
                />
                <Bar 
                  dataKey="exposure" 
                  fill="#ff9dff" 
                  radius={[0, 4, 4, 0]}
                  barSize={12}
                />
              </BarChart>
            </ResponsiveContainer>
          </div>
        </div>

        {/* Bottom right card - Pie Chart */}
        <div className={styles.card}>
          <h3 className={styles.cardTitle}>Risk Distribution</h3>
          <p className={styles.cardText}>Breakdown of risk by team.</p>
          <div style={{ width: "100%", height: 180, marginTop: "1rem" }}>
            <ResponsiveContainer>
              <PieChart>
                <Pie
                  data={severityData}
                  cx="50%"
                  cy="50%"
                  innerRadius={50}
                  outerRadius={80}
                  paddingAngle={2}
                  dataKey="value"
                >
                  {severityData.map((entry, index) => (
                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                  ))}
                </Pie>
                <Legend 
                  layout="vertical"
                  align="left"
                  verticalAlign="middle"
                  wrapperStyle={{ fontSize: "12px", color: "#cfcac2" }}
                />
              </PieChart>
            </ResponsiveContainer>
          </div>
        </div>
      </div>
    </div>
  );
}